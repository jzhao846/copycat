'use strict';var mdc=function(exports){'use strict';class MDCFoundation{static get cssClasses(){return{}}static get strings(){return{}}static get numbers(){return{}}static get defaultAdapter(){return{}}constructor(adapter={}){this.adapter_=adapter}init(){}destroy(){}}class MDCComponent{static attachTo(root){return new MDCComponent(root,new MDCFoundation())}constructor(root,foundation=undefined,...args){this.root_=root;this.initialize(...args);this.foundation_=foundation===undefined?this.getDefaultFoundation():foundation;this.foundation_.init();this.initialSyncWithDOM()}initialize(){}getDefaultFoundation(){throw new Error('Subclasses must override getDefaultFoundation to return a properly configured '+'foundation class')}initialSyncWithDOM(){}destroy(){this.foundation_.destroy()}listen(evtType,handler){this.root_.addEventListener(evtType,handler)}unlisten(evtType,handler){this.root_.removeEventListener(evtType,handler)}emit(evtType,evtData,shouldBubble=false){let evt;if(typeof CustomEvent==='function'){evt=new CustomEvent(evtType,{detail:evtData,bubbles:shouldBubble})}else{evt=document.createEvent('CustomEvent');evt.initCustomEvent(evtType,shouldBubble,false,evtData)}this.root_.dispatchEvent(evt)}}const cssClasses={ROOT:'mdc-ripple-upgraded',UNBOUNDED:'mdc-ripple-upgraded--unbounded',BG_FOCUSED:'mdc-ripple-upgraded--background-focused',FG_ACTIVATION:'mdc-ripple-upgraded--foreground-activation',FG_DEACTIVATION:'mdc-ripple-upgraded--foreground-deactivation'};const strings={VAR_LEFT:'--mdc-ripple-left',VAR_TOP:'--mdc-ripple-top',VAR_FG_SIZE:'--mdc-ripple-fg-size',VAR_FG_SCALE:'--mdc-ripple-fg-scale',VAR_FG_TRANSLATE_START:'--mdc-ripple-fg-translate-start',VAR_FG_TRANSLATE_END:'--mdc-ripple-fg-translate-end'};const numbers={PADDING:10,INITIAL_ORIGIN_SCALE:0.6,DEACTIVATION_TIMEOUT_MS:225,FG_DEACTIVATION_MS:150,TAP_DELAY_MS:300};let supportsCssVariables_;let supportsPassive_;function detectEdgePseudoVarBug(windowObj){const document=windowObj.document;const node=document.createElement('div');node.className='mdc-ripple-surface--test-edge-var-bug';document.body.appendChild(node);const computedStyle=windowObj.getComputedStyle(node);const hasPseudoVarBug=computedStyle!==null&&computedStyle.borderTopStyle==='solid';node.remove();return hasPseudoVarBug}function supportsCssVariables(windowObj,forceRefresh=false){let supportsCssVariables=supportsCssVariables_;if(typeof supportsCssVariables_==='boolean'&&!forceRefresh){return supportsCssVariables}const supportsFunctionPresent=windowObj.CSS&&typeof windowObj.CSS.supports==='function';if(!supportsFunctionPresent){return}const explicitlySupportsCssVars=windowObj.CSS.supports('--css-vars','yes');const weAreFeatureDetectingSafari10plus=windowObj.CSS.supports('(--css-vars: yes)')&&windowObj.CSS.supports('color','#00000000');if(explicitlySupportsCssVars||weAreFeatureDetectingSafari10plus){supportsCssVariables=!detectEdgePseudoVarBug(windowObj)}else{supportsCssVariables=false}if(!forceRefresh){supportsCssVariables_=supportsCssVariables}return supportsCssVariables}function applyPassive(globalObj=window,forceRefresh=false){if(supportsPassive_===undefined||forceRefresh){let isSupported=false;try{globalObj.document.addEventListener('test',null,{get passive(){isSupported=true;return isSupported}})}catch(e){}supportsPassive_=isSupported}return supportsPassive_?{passive:true}:false}function getMatchesProperty(HTMLElementPrototype){const matchesMethods=['matches','webkitMatchesSelector','msMatchesSelector'];let method='matches';for(let i=0;i<matchesMethods.length;i++){const matchesMethod=matchesMethods[i];if(matchesMethod in HTMLElementPrototype){method=matchesMethod;break}}return method}function getNormalizedEventCoords(ev,pageOffset,clientRect){const{x,y}=pageOffset;const documentX=x+clientRect.left;const documentY=y+clientRect.top;let normalizedX;let normalizedY;if(ev.type==='touchstart'){ev=ev;normalizedX=ev.changedTouches[0].pageX-documentX;normalizedY=ev.changedTouches[0].pageY-documentY}else{ev=ev;normalizedX=ev.pageX-documentX;normalizedY=ev.pageY-documentY}return{x:normalizedX,y:normalizedY}}const ACTIVATION_EVENT_TYPES=['touchstart','pointerdown','mousedown','keydown'];const POINTER_DEACTIVATION_EVENT_TYPES=['touchend','pointerup','mouseup'];let activatedTargets=[];class MDCRippleFoundation extends MDCFoundation{static get cssClasses(){return cssClasses}static get strings(){return strings}static get numbers(){return numbers}static get defaultAdapter(){return{browserSupportsCssVars:()=>{},isUnbounded:()=>{},isSurfaceActive:()=>{},isSurfaceDisabled:()=>{},addClass:()=>{},removeClass:()=>{},containsEventTarget:()=>{},registerInteractionHandler:()=>{},deregisterInteractionHandler:()=>{},registerDocumentInteractionHandler:()=>{},deregisterDocumentInteractionHandler:()=>{},registerResizeHandler:()=>{},deregisterResizeHandler:()=>{},updateCssVariable:()=>{},computeBoundingRect:()=>{},getWindowPageOffset:()=>{}}}constructor(adapter){super(Object.assign(MDCRippleFoundation.defaultAdapter,adapter));this.layoutFrame_=0;this.frame_={width:0,height:0};this.activationState_=this.defaultActivationState_();this.initialSize_=0;this.maxRadius_=0;this.activateHandler_=e=>this.activate_(e);this.deactivateHandler_=()=>this.deactivate_();this.focusHandler_=()=>this.handleFocus();this.blurHandler_=()=>this.handleBlur();this.resizeHandler_=()=>this.layout();this.unboundedCoords_={left:0,top:0};this.fgScale_=0;this.activationTimer_=0;this.fgDeactivationRemovalTimer_=0;this.activationAnimationHasEnded_=false;this.activationTimerCallback_=()=>{this.activationAnimationHasEnded_=true;this.runDeactivationUXLogicIfReady_()};this.previousActivationEvent_}supportsPressRipple_(){return this.adapter_.browserSupportsCssVars()}defaultActivationState_(){return{isActivated:false,hasDeactivationUXRun:false,wasActivatedByPointer:false,wasElementMadeActive:false,activationEvent:undefined,isProgrammatic:false}}init(){const supportsPressRipple=this.supportsPressRipple_();this.registerRootHandlers_(supportsPressRipple);if(supportsPressRipple){const{ROOT,UNBOUNDED}=MDCRippleFoundation.cssClasses;requestAnimationFrame(()=>{this.adapter_.addClass(ROOT);if(this.adapter_.isUnbounded()){this.adapter_.addClass(UNBOUNDED);this.layoutInternal_()}})}}destroy(){if(this.supportsPressRipple_()){if(this.activationTimer_){clearTimeout(this.activationTimer_);this.activationTimer_=0;this.adapter_.removeClass(MDCRippleFoundation.cssClasses.FG_ACTIVATION)}if(this.fgDeactivationRemovalTimer_){clearTimeout(this.fgDeactivationRemovalTimer_);this.fgDeactivationRemovalTimer_=0;this.adapter_.removeClass(MDCRippleFoundation.cssClasses.FG_DEACTIVATION)}const{ROOT,UNBOUNDED}=MDCRippleFoundation.cssClasses;requestAnimationFrame(()=>{this.adapter_.removeClass(ROOT);this.adapter_.removeClass(UNBOUNDED);this.removeCssVars_()})}this.deregisterRootHandlers_();this.deregisterDeactivationHandlers_()}registerRootHandlers_(supportsPressRipple){if(supportsPressRipple){ACTIVATION_EVENT_TYPES.forEach(type=>{this.adapter_.registerInteractionHandler(type,this.activateHandler_)});if(this.adapter_.isUnbounded()){this.adapter_.registerResizeHandler(this.resizeHandler_)}}this.adapter_.registerInteractionHandler('focus',this.focusHandler_);this.adapter_.registerInteractionHandler('blur',this.blurHandler_)}registerDeactivationHandlers_(e){if(e.type==='keydown'){this.adapter_.registerInteractionHandler('keyup',this.deactivateHandler_)}else{POINTER_DEACTIVATION_EVENT_TYPES.forEach(type=>{this.adapter_.registerDocumentInteractionHandler(type,this.deactivateHandler_)})}}deregisterRootHandlers_(){ACTIVATION_EVENT_TYPES.forEach(type=>{this.adapter_.deregisterInteractionHandler(type,this.activateHandler_)});this.adapter_.deregisterInteractionHandler('focus',this.focusHandler_);this.adapter_.deregisterInteractionHandler('blur',this.blurHandler_);if(this.adapter_.isUnbounded()){this.adapter_.deregisterResizeHandler(this.resizeHandler_)}}deregisterDeactivationHandlers_(){this.adapter_.deregisterInteractionHandler('keyup',this.deactivateHandler_);POINTER_DEACTIVATION_EVENT_TYPES.forEach(type=>{this.adapter_.deregisterDocumentInteractionHandler(type,this.deactivateHandler_)})}removeCssVars_(){const{strings:strings$$1}=MDCRippleFoundation;Object.keys(strings$$1).forEach(k=>{if(k.indexOf('VAR_')===0){this.adapter_.updateCssVariable(strings$$1[k],null)}})}activate_(e){if(this.adapter_.isSurfaceDisabled()){return}const activationState=this.activationState_;if(activationState.isActivated){return}const previousActivationEvent=this.previousActivationEvent_;const isSameInteraction=previousActivationEvent&&e!==undefined&&previousActivationEvent.type!==e.type;if(isSameInteraction){return}activationState.isActivated=true;activationState.isProgrammatic=e===undefined;activationState.activationEvent=e;activationState.wasActivatedByPointer=activationState.isProgrammatic?false:e!==undefined&&(e.type==='mousedown'||e.type==='touchstart'||e.type==='pointerdown');const hasActivatedChild=e!==undefined&&activatedTargets.length>0&&activatedTargets.some(target=>this.adapter_.containsEventTarget(target));if(hasActivatedChild){this.resetActivationState_();return}if(e!==undefined){activatedTargets.push(e.target);this.registerDeactivationHandlers_(e)}activationState.wasElementMadeActive=this.checkElementMadeActive_(e);if(activationState.wasElementMadeActive){this.animateActivation_()}requestAnimationFrame(()=>{activatedTargets=[];if(!activationState.wasElementMadeActive&&e!==undefined&&(e.key===' '||e.keyCode===32)){activationState.wasElementMadeActive=this.checkElementMadeActive_(e);if(activationState.wasElementMadeActive){this.animateActivation_()}}if(!activationState.wasElementMadeActive){this.activationState_=this.defaultActivationState_()}})}checkElementMadeActive_(e){return e!==undefined&&e.type==='keydown'?this.adapter_.isSurfaceActive():true}activate(event){this.activate_(event)}animateActivation_(){const{VAR_FG_TRANSLATE_START,VAR_FG_TRANSLATE_END}=MDCRippleFoundation.strings;const{FG_DEACTIVATION,FG_ACTIVATION}=MDCRippleFoundation.cssClasses;const{DEACTIVATION_TIMEOUT_MS}=MDCRippleFoundation.numbers;this.layoutInternal_();let translateStart='';let translateEnd='';if(!this.adapter_.isUnbounded()){const{startPoint,endPoint}=this.getFgTranslationCoordinates_();translateStart=`${startPoint.x}px, ${startPoint.y}px`;translateEnd=`${endPoint.x}px, ${endPoint.y}px`}this.adapter_.updateCssVariable(VAR_FG_TRANSLATE_START,translateStart);this.adapter_.updateCssVariable(VAR_FG_TRANSLATE_END,translateEnd);clearTimeout(this.activationTimer_);clearTimeout(this.fgDeactivationRemovalTimer_);this.rmBoundedActivationClasses_();this.adapter_.removeClass(FG_DEACTIVATION);this.adapter_.computeBoundingRect();this.adapter_.addClass(FG_ACTIVATION);this.activationTimer_=setTimeout(()=>this.activationTimerCallback_(),DEACTIVATION_TIMEOUT_MS)}getFgTranslationCoordinates_(){const{activationEvent,wasActivatedByPointer}=this.activationState_;let startPoint;if(wasActivatedByPointer){startPoint=getNormalizedEventCoords(activationEvent,this.adapter_.getWindowPageOffset(),this.adapter_.computeBoundingRect())}else{startPoint={x:this.frame_.width/2,y:this.frame_.height/2}}startPoint={x:startPoint.x-this.initialSize_/2,y:startPoint.y-this.initialSize_/2};const endPoint={x:this.frame_.width/2-this.initialSize_/2,y:this.frame_.height/2-this.initialSize_/2};return{startPoint,endPoint}}runDeactivationUXLogicIfReady_(){const{FG_DEACTIVATION}=MDCRippleFoundation.cssClasses;const{hasDeactivationUXRun,isActivated}=this.activationState_;const activationHasEnded=hasDeactivationUXRun||!isActivated;if(activationHasEnded&&this.activationAnimationHasEnded_){this.rmBoundedActivationClasses_();this.adapter_.addClass(FG_DEACTIVATION);this.fgDeactivationRemovalTimer_=setTimeout(()=>{this.adapter_.removeClass(FG_DEACTIVATION)},numbers.FG_DEACTIVATION_MS)}}rmBoundedActivationClasses_(){const{FG_ACTIVATION}=MDCRippleFoundation.cssClasses;this.adapter_.removeClass(FG_ACTIVATION);this.activationAnimationHasEnded_=false;this.adapter_.computeBoundingRect()}resetActivationState_(){this.previousActivationEvent_=this.activationState_.activationEvent;this.activationState_=this.defaultActivationState_();setTimeout(()=>this.previousActivationEvent_=undefined,MDCRippleFoundation.numbers.TAP_DELAY_MS)}deactivate_(){const activationState=this.activationState_;if(!activationState.isActivated){return}const state=Object.assign({},activationState);if(activationState.isProgrammatic){requestAnimationFrame(()=>this.animateDeactivation_(state));this.resetActivationState_()}else{this.deregisterDeactivationHandlers_();requestAnimationFrame(()=>{this.activationState_.hasDeactivationUXRun=true;this.animateDeactivation_(state);this.resetActivationState_()})}}deactivate(){this.deactivate_()}animateDeactivation_({wasActivatedByPointer,wasElementMadeActive}){if(wasActivatedByPointer||wasElementMadeActive){this.runDeactivationUXLogicIfReady_()}}layout(){if(this.layoutFrame_){cancelAnimationFrame(this.layoutFrame_)}this.layoutFrame_=requestAnimationFrame(()=>{this.layoutInternal_();this.layoutFrame_=0})}layoutInternal_(){this.frame_=this.adapter_.computeBoundingRect();const maxDim=Math.max(this.frame_.height,this.frame_.width);const getBoundedRadius=()=>{const hypotenuse=Math.sqrt(Math.pow(this.frame_.width,2)+Math.pow(this.frame_.height,2));return hypotenuse+MDCRippleFoundation.numbers.PADDING};this.maxRadius_=this.adapter_.isUnbounded()?maxDim:getBoundedRadius();this.initialSize_=Math.floor(maxDim*MDCRippleFoundation.numbers.INITIAL_ORIGIN_SCALE);this.fgScale_=this.maxRadius_/this.initialSize_;this.updateLayoutCssVars_()}updateLayoutCssVars_(){const{VAR_FG_SIZE,VAR_LEFT,VAR_TOP,VAR_FG_SCALE}=MDCRippleFoundation.strings;this.adapter_.updateCssVariable(VAR_FG_SIZE,`${this.initialSize_}px`);this.adapter_.updateCssVariable(VAR_FG_SCALE,this.fgScale_);if(this.adapter_.isUnbounded()){this.unboundedCoords_={left:Math.round(this.frame_.width/2-this.initialSize_/2),top:Math.round(this.frame_.height/2-this.initialSize_/2)};this.adapter_.updateCssVariable(VAR_LEFT,`${this.unboundedCoords_.left}px`);this.adapter_.updateCssVariable(VAR_TOP,`${this.unboundedCoords_.top}px`)}}setUnbounded(unbounded){const{UNBOUNDED}=MDCRippleFoundation.cssClasses;if(unbounded){this.adapter_.addClass(UNBOUNDED)}else{this.adapter_.removeClass(UNBOUNDED)}}handleFocus(){requestAnimationFrame(()=>this.adapter_.addClass(MDCRippleFoundation.cssClasses.BG_FOCUSED))}handleBlur(){requestAnimationFrame(()=>this.adapter_.removeClass(MDCRippleFoundation.cssClasses.BG_FOCUSED))}}class MDCRipple extends MDCComponent{constructor(...args){super(...args);this.disabled=false;this.unbounded_}static attachTo(root,{isUnbounded=undefined}={}){const ripple=new MDCRipple(root);if(isUnbounded!==undefined){ripple.unbounded=isUnbounded}return ripple}static createAdapter(instance){const MATCHES=getMatchesProperty(HTMLElement.prototype);return{browserSupportsCssVars:()=>supportsCssVariables(window),isUnbounded:()=>instance.unbounded,isSurfaceActive:()=>instance.root_[MATCHES](':active'),isSurfaceDisabled:()=>instance.disabled,addClass:className=>instance.root_.classList.add(className),removeClass:className=>instance.root_.classList.remove(className),containsEventTarget:target=>instance.root_.contains(target),registerInteractionHandler:(evtType,handler)=>instance.root_.addEventListener(evtType,handler,applyPassive()),deregisterInteractionHandler:(evtType,handler)=>instance.root_.removeEventListener(evtType,handler,applyPassive()),registerDocumentInteractionHandler:(evtType,handler)=>document.documentElement.addEventListener(evtType,handler,applyPassive()),deregisterDocumentInteractionHandler:(evtType,handler)=>document.documentElement.removeEventListener(evtType,handler,applyPassive()),registerResizeHandler:handler=>window.addEventListener('resize',handler),deregisterResizeHandler:handler=>window.removeEventListener('resize',handler),updateCssVariable:(varName,value)=>instance.root_.style.setProperty(varName,value),computeBoundingRect:()=>instance.root_.getBoundingClientRect(),getWindowPageOffset:()=>({x:window.pageXOffset,y:window.pageYOffset})}}get unbounded(){return this.unbounded_}set unbounded(unbounded){this.unbounded_=Boolean(unbounded);this.setUnbounded_()}setUnbounded_(){this.foundation_.setUnbounded(this.unbounded_)}activate(){this.foundation_.activate()}deactivate(){this.foundation_.deactivate()}layout(){this.foundation_.layout()}getDefaultFoundation(){return new MDCRippleFoundation(MDCRipple.createAdapter(this))}initialSyncWithDOM(){this.unbounded='mdcRippleIsUnbounded'in this.root_.dataset}}class RippleCapableSurface{}RippleCapableSurface.prototype.root_;RippleCapableSurface.prototype.unbounded;RippleCapableSurface.prototype.disabled;let ripple={MDCRipple};exports.ripple=ripple;return exports}({});
